const customSelect=document.querySelectorAll(".custom-select"),overlay=document.querySelector(".overlay"),header=document.querySelector(".header"),iconMenu=document.querySelector(".icon-menu"),mobMenu=document.querySelector(".mobile-menu"),modalShowBtn=document.querySelectorAll(".modal-show-btn"),modal=document.querySelectorAll(".modal"),feedbackModal=document.querySelector(".feedback-modal"),cartModal=document.querySelector(".cart-modal"),successModal=document.querySelector(".success-modal"),errorModal=document.querySelector(".error-modal"),shareImg=document.querySelector(".share-modal__img"),sharePdf=document.querySelector(".share-modal__pdf"),shareEmail=document.querySelector(".share-modal__mail"),shareLink=document.querySelector(".share-modal__link");let paddingValue,animSpd=400;function sprite(e){return'<svg><use xlink:href="img/icons/sprite.svg#'+e+'"></use></svg>'}function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll")}function disableScroll(){paddingValue=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0,document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight=paddingValue)),document.body.style.paddingRight=paddingValue,document.body.classList.add("no-scroll")}function smoothDrop(e,t,r){if(t.style.overflow="hidden",t.style.transition=`height ${r}ms ease`,t.style["-webkit-transition"]=`height ${r}ms ease`,e.classList.contains("active")){e.classList.remove("open");let o=t.clientHeight+"px";t.style.height=o,setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active")}),r)}),0)}else{e.classList.add("open"),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active")}),r)}),0)}}function tabSwitch(e,t){e.forEach(((r,o)=>{r.addEventListener("click",(()=>{r.getAttribute("data-nav");e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),r.classList.add("active"),t[o].classList.add("active"),r.style.opacity="0",t[o].style.opacity="0",setTimeout((()=>{r.style.opacity="1",t[o].style.opacity="1"}),0)}))}))}function addToCart(){openModal(cartModal)}function formSuccess(e){e.querySelectorAll(".item-form").forEach((e=>e.classList.remove("error"))),e.querySelectorAll("input").forEach((e=>{["hidden","checkbox","radio"].includes(e.type)||(e.value=""),["checkbox","radio"].includes(e.type)&&!e.classList.contains("required")&&(e.checked=!1)})),e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector(".file-form__items")&&(e.querySelector(".file-form__items").innerHTML="");let t=document.querySelector(".modal.open");t?(t.classList.remove("open"),t.classList.contains("review-modal")?document.querySelector(".review-success-modal").classList.add("open"):successModal.classList.add("open")):openModal(successModal)}function mailFormSuccess(e){e.querySelector("input").value=""}function openModal(e){mobMenu.classList.contains("open")||document.querySelector(".header__search.show")||disableScroll(),e.classList.add("open")}function closeModal(e){e.querySelector("video")&&e.querySelectorAll("video").forEach((e=>e.pause())),e.classList.remove("open"),setTimeout((()=>{mobMenu.classList.contains("open")||document.querySelector(".header__search.show")||enableScroll()}),animSpd)}modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)&&!e.querySelector(".modal__close").contains(t.target)||(closeModal(e),e.classList.contains("custom-select__options")&&closeSelectCustom(e.parentNode))}))})),modalShowBtn.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=e.getAttribute("data-modal");openModal(document.getElementById(r))}))})),document.querySelectorAll(".success-close").forEach((e=>{e.addEventListener("click",(()=>e.parentNode.querySelector(".modal__close").click()))}));const cityModal=document.querySelector(".city-modal");cityModal&&(cityModal.querySelector(".main-btn").addEventListener("click",(()=>closeModal(cityModal))),cityModal.querySelector(".stroke-btn").addEventListener("click",(()=>{closeModal(cityModal),setTimeout((()=>{openModal(document.querySelector(".city-search-modal"))}),animSpd)}))),window.addEventListener("scroll",(()=>{document.querySelector(".header__top").getBoundingClientRect().bottom<0?(header.classList.add("fixed"),document.querySelector(".header__bottom").classList.add("fixed-block")):(header.classList.remove("fixed"),document.querySelector(".header__bottom").classList.remove("fixed-block"))})),iconMenu.addEventListener("click",(()=>{disableScroll(),mobMenu.classList.add("open")})),window.addEventListener("resize",(()=>{window.innerWidth>992.98&&mobMenu.classList.contains("open")&&mobMenu.querySelector(".mobile-menu__close").click()})),mobMenu.addEventListener("click",(e=>{mobMenu.querySelector(".mobile-menu__inner").contains(e.target)&&!mobMenu.querySelector(".mobile-menu__close").contains(e.target)||(mobMenu.classList.remove("open"),enableScroll())}));const searchToggle=document.querySelector(".search-toggle"),searchClose=document.querySelector(".search__close");searchToggle.addEventListener("click",(()=>{document.querySelector(".header__search").classList.add("show"),disableScroll(),overlay.classList.add("show"),header.classList.remove("open"),iconMenu.setAttribute("aria-label","Открыть меню")})),searchClose.addEventListener("click",(()=>{document.querySelector(".header__search").classList.remove("show"),overlay.classList.remove("show"),setTimeout((()=>{header.classList.contains("open")||enableScroll()}),animSpd)})),overlay.addEventListener("click",(()=>{searchClose.click()}));const searchForm=document.querySelectorAll(".search-form");searchForm&&searchForm.forEach((e=>{e.querySelector("input").addEventListener("input",(()=>{e.querySelector("input").value.length>0?e.querySelector(".search-form__reset").classList.add("show"):e.querySelector(".search-form__reset").classList.remove("show")})),e.addEventListener("reset",(()=>{e.querySelector(".search-form__reset").classList.remove("show")}))}));const inp=document.querySelectorAll("input[type=tel]");inp&&inp.forEach((e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)}));const lazyVid=document.querySelectorAll(".lazy-video");lazyVid&&lazyVid.forEach((e=>{e.addEventListener("click",(function t(){let r=e.getAttribute("data-src"),o=e.getAttribute("data-src-webm");const i=document.createElement("video");i.setAttribute("loop",""),i.setAttribute("playsinline",""),i.setAttribute("controls",""),e.append(i);let c=""!==e.querySelector("video").canPlayType('video/webm; codecs="vp8, vorbis"');e.querySelector("video").innerHTML=c&&o?`<source src="${o}" type='video/webm'>`:`<source src="${r}">`,setTimeout((()=>{e.querySelector("video").muted=!0,e.querySelector("video").play(),e.classList.add("play")}),0),e.removeEventListener("click",t)}))})),$(".js-anchor").click((function(e){e.preventDefault();let t=$(this).attr("href"),r=$(t).offset().top;return $("html,body").animate({scrollTop:r-$(".header__bottom").height()-20},500)}));let fileTypes=["image/png","image/jpeg"];document.querySelectorAll(".file-form").forEach((e=>{e.querySelector("input").addEventListener("change",(t=>{e.querySelectorAll(".file-form__item").forEach((e=>e.remove()));let r=t.target.files;for(let t=0;t<r.length;t++){let o=r[t];if(o.size>10485760)e.querySelector("input").value="",e.classList.add("error"),e.querySelectorAll(".file-form__item").forEach((e=>e.remove())),e.querySelector(".item-form__error").textContent="Файл должен быть менее 10 МБ";else if(fileTypes.includes(o.type)){e.classList.remove("error"),e.querySelector(".item-form__error").textContent="";let t=new FileReader;t.readAsDataURL(o),t.onload=()=>{e.querySelector(".file-form__items").innerHTML+=`<div class="file-form__item">\n          <img src=${t.result} alt="">\n          <div class="file-form__name">${o.name}</div>\n          <div class="file-form__size">${(o.size/1048576).toFixed(2)}Mb</div>\n          <div class="file-form__del">${sprite("close")}</div>\n         </div>\n        `},t.onerror=()=>{console.log(t.error)}}else e.querySelector("input").value="",e.classList.add("error"),e.querySelectorAll(".file-form__item").forEach((e=>e.remove())),e.querySelector(".item-form__error").textContent="Разрешённые форматы: png, jpg"}})),e.addEventListener("click",(t=>{e.querySelectorAll(".file-form__del").forEach(((r,o)=>{if(r.contains(t.target)){const t=new DataTransfer,i=e.querySelector("input"),{files:c}=i;for(let e=0;e<c.length;e++){let r=c[e];e!==o&&t.items.add(r)}i.files=t.files,setTimeout((()=>{r.parentNode.remove()}),0)}}))}))}));const swiper1=document.querySelectorAll(".swiper-1");swiper1&&swiper1.forEach((e=>{new Swiper(e.querySelector(".swiper"),{observe:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:800,allowTouchMove:!1,navigation:{nextEl:e.querySelector(".nav-btn--next"),prevEl:e.querySelector(".nav-btn--prev")}})}));let bestSwiper,initBest=!1;const bestsellers=document.querySelector(".bestsellers");if(bestsellers){function initTheBestsSwiper(){window.innerWidth<=992.98&&!initBest?(initBest=!0,bestSwiper=new Swiper(bestsellers.querySelector(".swiper"),{slidesPerView:1.13,spaceBetween:20,observe:!0,observeParents:!0,speed:800,navigation:{nextEl:bestsellers.querySelector(".nav-btn--next"),prevEl:bestsellers.querySelector(".nav-btn--prev")},breakpoints:{699.98:{slidesPerView:2}}})):initBest&&(initBest=!1,bestSwiper.destroy())}initTheBestsSwiper(),window.addEventListener("resize",initTheBestsSwiper)}const mainArt=document.querySelector(".main-articles");if(mainArt){new Swiper(mainArt.querySelector(".swiper"),{slidesPerView:1.13,spaceBetween:20,observe:!0,observeParents:!0,speed:800,navigation:{nextEl:mainArt.querySelector(".nav-btn--next"),prevEl:mainArt.querySelector(".nav-btn--prev")},breakpoints:{1690.98:{slidesPerView:4,spaceBetween:30},992.98:{slidesPerView:4,spaceBetween:20},699.98:{slidesPerView:2.42,spaceBetween:20}}})}$(".accordion__header").on("click",(function(){$(".accordion").each((function(){$(this).find("video").length>0&&$(this).find("video").get(0).pause()})),$(this).toggleClass("open").siblings(".accordion__body").slideToggle().parents(".accordion").siblings(".accordion").find(".accordion__header").removeClass("open").siblings(".accordion__body").slideUp()}));const filterAcc=document.querySelectorAll(".filter-acc");filterAcc.forEach((e=>{e.querySelector(".filter-acc__header").addEventListener("click",(t=>{["input","label"].includes(t.target.localName)||smoothDrop(e.querySelector(".filter-acc__header"),e.querySelector(".filter-acc__body"),500)}))}));const cardSwiper=document.querySelectorAll(".card-swiper");cardSwiper&&cardSwiper.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:1.13,spaceBetween:20,observe:!0,observeParents:!0,loop:!0,navigation:{prevEl:e.querySelector(".nav-btn--prev"),nextEl:e.querySelector(".nav-btn--next")},speed:800,breakpoints:{1690.98:{slidesPerView:4,spaceBetween:30},992.98:{slidesPerView:4,spaceBetween:20},699.98:{slidesPerView:2,spaceBetween:20}}})}));const filter=document.querySelector(".filter"),filterSelected=document.querySelector(".filter-selected__items");if(filter&&filterSelected){const e={checkInp:function(e){e.checked=!0,e.setAttribute("checked",!0)},uncheckInp:function(e){e.checked=!1,e.removeAttribute("checked")},setSelected:function(e){let t=e.parentNode.querySelector("span:last-child").textContent,r=e.getAttribute("data-id");filterSelected.insertAdjacentHTML("afterbegin",`<div class="filter-selected__item" data-target="${r}">${t}${sprite("close")}</div>`)},removeSelected:function(e){filterSelected.querySelector(`[data-target="${e}"]`)&&filterSelected.querySelector(`[data-target="${e}"]`).remove()},selectedOnClick:function(e){filterSelected.querySelectorAll(".filter-selected__item").forEach(((t,r)=>{if(t.contains(e.target)){let e=t.getAttribute("data-target");filter.querySelectorAll("input")[e].click(),t.remove()}}))},resetFilter:function(){filter.querySelectorAll("label input").forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),filterSelected.innerHTML=""}};filter.querySelectorAll("label input").forEach(((t,r)=>{t.setAttribute("data-id",r);let o=t.getAttribute("data-id");if(t.addEventListener("change",(()=>{t.checked?e.setSelected(t):e.removeSelected(o)})),t.parentNode.parentNode.classList.contains("filter-acc__header")){let r=t.closest(".filter-acc").querySelector(".filter-acc__body").querySelectorAll("label input");t.addEventListener("change",(()=>{t.checked?r.forEach((t=>{e.checkInp(t),e.removeSelected(t.getAttribute("data-id"))})):r.forEach((t=>e.uncheckInp(t)))})),r.forEach((i=>{i.addEventListener("change",(()=>{Array.from(r).every((e=>e.checked))?(e.checkInp(t),setTimeout((()=>{r.forEach((t=>{e.removeSelected(t.getAttribute("data-id"))})),e.setSelected(t)}),0)):t.checked&&(e.uncheckInp(t),e.removeSelected(o),r.forEach((t=>{t.checked&&e.setSelected(t)})))}))}))}})),filterSelected.addEventListener("click",(t=>e.selectedOnClick(t))),document.querySelector(".filter-selected__reset").addEventListener("click",(()=>e.resetFilter())),filter.querySelector(".filter__form").addEventListener("reset",(()=>e.resetFilter())),document.querySelector(".filter-icon").addEventListener("click",(()=>{disableScroll(),filter.classList.add("open")})),filter.addEventListener("click",(e=>{filter.querySelector(".filter__form").contains(e.target)&&!filter.querySelector(".filter__close").contains(e.target)||(filter.classList.remove("open"),enableScroll())}))}const extraList=document.querySelectorAll(".extra-list");extraList&&extraList.forEach((e=>{let t=e.querySelector(".extra-list__btn").getAttribute("data-open"),r=e.querySelector(".extra-list__btn").getAttribute("data-close");e.querySelector(".extra-list__btn").addEventListener("click",(()=>{e.classList.contains("open")?(e.classList.remove("open"),e.querySelector(".extra-list__btn span").textContent=t):(e.classList.add("open"),e.querySelector(".extra-list__btn span").textContent=r)}))}));const quantity=document.querySelectorAll(".quantity");function openSelectCustom(e){e.classList.add("open"),e.setAttribute("aria-expanded",!0),e.querySelectorAll(".custom-select__options input").forEach((t=>{t.addEventListener("change",(t=>{setActiveOption(e),closeSelectCustom(e)}))})),document.addEventListener("click",(function t(r){e.contains(r.target)||(closeSelectCustom(e),document.removeEventListener("click",t))}))}function setActiveOption(e){let t=e.querySelector("input:checked").nextElementSibling.innerHTML;e.querySelector(".custom-select__selected span").innerHTML=t}function closeSelectCustom(e){e.classList.remove("open"),e.setAttribute("aria-expanded",!1),e.querySelector(".modal.open")&&closeModal(e.querySelector(".modal"))}quantity&&quantity.forEach((e=>{const t=e.querySelector("input");e.querySelector(".js-minus").addEventListener("click",(()=>{t.value>1&&t.value--})),e.querySelector(".js-plus").addEventListener("click",(()=>{t.value++})),t.addEventListener("change",(e=>{Number.isInteger(e.target.value)||e.target.value>0?t.value=e.target.value:t.value=1}))})),customSelect&&customSelect.forEach((e=>{e.querySelector(".custom-select__selected").addEventListener("click",(()=>{e.classList.contains("open")?closeSelectCustom(e):(openSelectCustom(e),window.innerWidth<992.98&&e.querySelector(".modal")&&openModal(e.querySelector(".modal")))})),window.addEventListener("resize",(()=>{window.innerWidth>992.98&&e.querySelector(".modal.open")?closeModal(e.querySelector(".modal")):window.innerWidth<992.98&&e.querySelector(".modal")&&!e.querySelector(".modal.open")&&closeSelectCustom(e)}))}));const intro=document.querySelector(".intro");if(intro){document.querySelectorAll(".intro-thumb__nmb").forEach((e=>+e.textContent<10?e.textContent="0"+e.textContent:""));let t=new Swiper(".intro__thumbswiper",{slidesPerView:1,spaceBetween:56,observe:!0,observeParents:!0,speed:1e3,loop:!0,freeMode:!0,navigation:{nextEl:intro.querySelector(".nav-btn--next"),prevEl:intro.querySelector(".nav-btn--prev")},breakpoints:{1690.98:{slidesPerView:4,spaceBetween:54},1090.98:{slidesPerView:3,spaceBetween:24},992.98:{slidesPerView:2,spaceBetween:24}}}),r=new Swiper(".intro__bgswiper",{observe:!0,observeParents:!0,speed:1e3,loop:!0,watchSlidesProgress:!0,parallax:!0,thumbs:{swiper:t},navigation:{nextEl:intro.querySelector(".nav-btn--next"),prevEl:intro.querySelector(".nav-btn--prev")}}),o=new Swiper(".intro__textswiper",{observe:!0,observeParents:!0,speed:1e3,loop:!0,effect:"fade",fadeEffect:{crossFade:!0},allowTouchMove:!1,navigation:{nextEl:intro.querySelector(".nav-btn--next"),prevEl:intro.querySelector(".nav-btn--prev")}});r.on("slideChange",(()=>{o.slideTo(r.activeIndex)}))}const product=document.querySelector(".product");window.addEventListener("load",(()=>{function e(){document.querySelector(".total-product__price").textContent=String(modifiedData.designPrice?modifiedData.priceDesign:modifiedData.priceStandart).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim(),document.querySelector(".total-product__square").textContent=modifiedData.square,modifiedData.priceTotal=Math.round(modifiedData.square*(modifiedData.designPrice?modifiedData.priceDesign:modifiedData.priceStandart)),orderForm.querySelector("input[name=priceTotal]").value=modifiedData.priceTotal,document.querySelector(".total-product__totalprice").textContent=String(modifiedData.priceTotal).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim(),document.querySelector(".total-product__mobprice").textContent=String(modifiedData.priceTotal).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim()}function t(){modifiedData.reflectX||modifiedData.greyscale||0!=modifiedData.imgStartX||modifiedData.cropped||modifiedData.selfSize?modifiedData.designPrice=!0:modifiedData.designPrice=!1,orderForm.querySelector("input[name=designPrice]").value=modifiedData.designPrice,e()}function r(){modifiedData.square=(modifiedData.width*modifiedData.height/1e4).toFixed(2),orderForm.querySelector("input[name=square]").value=modifiedData.square,orderForm.querySelector("input[name=width]").value=modifiedData.width,orderForm.querySelector("input[name=height]").value=modifiedData.height,sizeProduct.querySelector("input[name=selfWidth]").value=modifiedData.width,sizeProduct.querySelector("input[name=selfHeight]").value=modifiedData.height,document.querySelector(".main-product__width span").textContent=modifiedData.width,document.querySelector(".main-product__width .main-product__line").style.width=cropper.cropBoxData.width/cropper.containerData.width*100+"%",document.querySelector(".main-product__height span").textContent=modifiedData.height,document.querySelector(".main-product__height .main-product__line").style.height=cropper.cropBoxData.height/cropper.containerData.height*100+"%",e()}function o(e){e.target.classList.contains("prev")?modifiedData.reflectX?shiftImg-=2:shiftImg+=2:modifiedData.reflectX?shiftImg+=2:shiftImg-=2,cropperCanvas.style.backgroundPosition=`${shiftImg}px center`,mainImg.style.backgroundPosition=`${document.querySelector(".main-product__btn").clientWidth+shiftImg}px center`,cropper.setCropBoxData(cropper.getCropBoxData())}let i,c,a=Date.now();function n(e){a=Date.now(),a-0<=e&&clearTimeout(i),i=setTimeout((async()=>{cropBox&&modifiedData.selfSize?await htmlToImage.toJpeg(cropBox).then((function(e){modifiedData.imgURl=e})).catch((function(e){modifiedData.imgURl=initialData.imgURl,console.error("oops, something went wrong!",e)})):modifiedData.imgURl=initialData.imgURl,shareImg.setAttribute("href",modifiedData.imgURl),shareImg.download=document.title+".jpeg"}),e)}if(product){const s=document.querySelectorAll(".item-texture"),d=document.querySelector(".texture-modal"),u=document.querySelector("#texture-modal-all"),m=document.querySelector("#orderPafarmsForm"),p=document.querySelector(".params-product__colorize"),y=document.querySelector(".params-product__reflect"),h=document.querySelector(".params-product__greyscale"),v=document.querySelector(".size-product"),S=document.getElementById("imageCrop"),f=document.querySelector(".main-product__img");let g,q,w,_=0;const b={width:+m.querySelector("input[name=width]").value,height:+m.querySelector("input[name=height]").value,aRatio:+m.querySelector("input[name=aRatio]").value,aRatioDefault:+m.querySelector("input[name=aRatioDefault]").value,square:+m.querySelector("input[name=square]").value,greyscale:+m.querySelector("input[name=greyscale]").value,reflectX:+m.querySelector("input[name=reflectX]").value,imgStartX:+m.querySelector("input[name=imgStartX]").value,imgStartY:+m.querySelector("input[name=imgStartY]").value,cropped:+m.querySelector("input[name=cropped]").value,colorize:+m.querySelector("input[name=colorize]").value,texture:m.querySelector("input[name=texture]").value,selfSize:+m.querySelector("input[name=selfSize]").value,designPrice:+m.querySelector("input[name=designPrice]").value,priceStandart:+m.querySelector("input[name=priceStandart]").value,priceDesign:+m.querySelector("input[name=priceDesign]").value,priceTotal:+m.querySelector("input[name=priceTotal]").value,imgURl:m.querySelector("input[name=imgURl]").value};let L=Object.assign({},b);n(2e3),document.querySelectorAll(".main-product__mainswiper .media-contain").forEach((e=>e.style.paddingTop=b.height/b.width*100+"%")),document.querySelector(".main-product__ratio span").style.paddingTop=b.height/b.width*100+"%";const E=new Swiper(".main-product__thumbs",{slidesPerView:3,spaceBetween:20,observer:!0,observeParents:!0,speed:800,breakpoints:{1690.98:{slidesPerView:3.55,spaceBetween:12}}});new Swiper(".main-product__mainswiper",{slidesPerView:1,observer:!0,observeParents:!0,effect:"fade",speed:0,allowTouchMove:!1,thumbs:{swiper:E}});if(d){let k=0;function l(){s.forEach((e=>{e.classList.remove("selected")})),product.querySelectorAll(".item-texture")[k].classList.add("selected"),u.querySelectorAll(".item-texture")[k].classList.add("selected");let t=d.querySelectorAll(".swiper-slide")[k].getAttribute("data-texture-name"),r=d.querySelectorAll(".swiper-slide")[k].getAttribute("data-texture-priceStandart"),o=d.querySelectorAll(".swiper-slide")[k].getAttribute("data-texture-priceDesign");L.texture=t,L.priceStandart=r,L.priceDesign=o,m.querySelector("input[name=texture]").value=t,m.querySelector("input[name=priceStandart").value=r,m.querySelector("input[name=priceDesign").value=o,e(),closeModal(d)}const A=new Swiper(d.querySelector(".swiper"),{slidesPerview:1,observe:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:800,navigation:{nextEl:d.querySelector(".nav-btn--next"),prevEl:d.querySelector(".nav-btn--prev")}});A.on("slideChange",(()=>{d.querySelector("video")&&d.querySelectorAll("video").forEach((e=>{e.pause()}))})),product.querySelectorAll(".item-texture").forEach(((e,t)=>{e.addEventListener("click",(r=>{e.querySelector(".media-cover").contains(r.target)?(A.slideTo(t),openModal(d)):(k=t,l())}))})),d.querySelector(".texture-modal__btn").addEventListener("click",(e=>{k=A.realIndex,l()})),u.querySelectorAll(".item-texture").forEach(((e,t)=>{e.addEventListener("click",(r=>{e.querySelector(".media-cover").contains(r.target)?(A.slideTo(t),closeModal(u),openModal(d)):(u.querySelectorAll(".item-texture").forEach((e=>e.classList.remove("selected"))),e.classList.add("selected"),k=t)}))})),u.querySelector(".main-btn").addEventListener("click",(()=>{l(),closeModal(u)})),document.querySelectorAll(".texture-modal__resetBtn").forEach((e=>{e.addEventListener("click",(e=>{k=0,l(),closeModal(u),closeModal(d)}))}))}let x;p.querySelector("input").addEventListener("change",(e=>{L.colorize=!!e.target.checked,m.querySelector("input[name=colorize]").value=e.target.checked})),y.querySelector("input").addEventListener("change",(e=>{L.reflectX=!!e.target.checked,m.querySelector("input[name=reflectX]").value=e.target.checked,e.target.checked?g.scale(-1,1):g.scale(1,1),f.classList.toggle("reverse"),q.classList.toggle("reverse"),w.classList.toggle("reverse"),t(),document.querySelector(".size-product__btn.self-size").classList.contains("active")||document.querySelector(".size-product__btn.self-size").click()})),h.querySelector("input").addEventListener("change",(e=>{L.greyscale=!!e.target.checked,m.querySelector("input[name=greyscale]").value=e.target.checked,f.classList.toggle("greyscale"),q.classList.toggle("greyscale"),w.classList.toggle("greyscale"),t(),document.querySelector(".size-product__btn.self-size").classList.contains("active")||document.querySelector(".size-product__btn.self-size").click()})),v.querySelectorAll(".size-product__btn").forEach((e=>{e.addEventListener("click",(()=>{v.querySelectorAll(".size-product__btn").forEach((e=>{e.classList.remove("active")})),e.classList.toggle("active"),e.classList.contains("self-size")?(L.selfSize=!0,document.querySelector(".main-product__top").classList.add("size-show"),document.querySelector(".main-product__preview").classList.remove("swiper-show"),g.resize()):(_=0,L.selfSize=!1,L.imgStartX="0%",L.width=+v.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-width"),L.height=+v.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-height"),document.querySelector(".main-product__top").classList.remove("size-show"),document.querySelector(".main-product__preview").classList.add("swiper-show"),f.style.backgroundPosition=null,g.reset(),q.style.backgroundPosition=`${_}px center`,g.setCropBoxData(g.getCropBoxData()),r()),m.querySelector("input[name=selfSize]").value=L.selfSize,t()}))})),v.querySelector(".custom-select").querySelectorAll("input").forEach((e=>{e.addEventListener("change",(()=>{L.width=+e.getAttribute("data-width"),L.height=+e.getAttribute("data-height"),r()}))})),v.querySelector(".size-product__fixed").addEventListener("change",(e=>{e.target.checked?(L.aRatio=L.width/L.height,g.options.aspectRatio=L.aRatio):(L.aRatio=L.aRatioDefault,g.options.aspectRatio=""),m.querySelector("input[name=aRatio]").value=L.aRatio})),document.querySelectorAll(".size-product__inp input").forEach((e=>{e.addEventListener("change",(e=>{if(Number.isInteger(e.target.value)||e.target.value>0){let t=+v.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-width"),r=+v.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-height");L.aRatio!=L.aRatioDefault&&("selfHeight"==e.target.name?v.querySelector("input[name=selfWidth]").value=Math.round(v.querySelector("input[name=selfWidth]").value*(e.target.value/L.height)):"selfWidth"==e.target.name&&(v.querySelector("input[name=selfHeight]").value=Math.round(v.querySelector("input[name=selfHeight]").value*(e.target.value/L.width))));let o=Math.round(v.querySelector("input[name=selfWidth]").value),i=Math.round(v.querySelector("input[name=selfHeight]").value),c=o/t*100,a=i/r*100,n=1,l=1;c>100&&(n=c/100),a>100&&(l=a/100),c>a?a/=n:c<a&&(c/=l),L.width=o,L.height=i;let s={left:(g.containerData.width-g.containerData.width*c/100)/2,top:(g.containerData.height-g.containerData.height*a/100)/2,width:c>100?g.containerData.width:g.containerData.width*c/100,height:a>100?g.containerData.height:g.containerData.height*a/100};g.setCropBoxData(s)}else v.querySelector("input[name=selfWidth]").value=L.width,v.querySelector("input[name=selfHeight]").value=L.height}))})),document.querySelectorAll(".main-product__btn").forEach((e=>{e.addEventListener("mousedown",(e=>{clearInterval(x),x=setInterval((()=>{o(e)}),50)})),e.addEventListener("mouseup",(e=>{clearInterval(x)})),e.addEventListener("touchstart",(e=>{clearInterval(x),x=setInterval((()=>{o(e)}),50)})),e.addEventListener("touchend",(e=>{clearInterval(x)}))})),g=new Cropper(S,{viewMode:2,movable:!1,zoomable:!1,rotatable:!1,autoCropArea:1,dragMode:"none",ready:function(e){g.zoomTo(1),q=document.querySelector(".cropper-canvas"),q.style.backgroundImage=`url(${g.image.currentSrc}`,document.querySelector(".cropper-view-box").innerHTML+="<span></span>",w=document.querySelector(".cropper-view-box span"),w.style.backgroundImage=`url(${g.image.currentSrc}`,w.style.backgroundSize=`${g.containerData.width}px ${g.containerData.height}px`,w.style.backgroundPosition=`-${g.getCropBoxData().left-_}px -${g.getCropBoxData().top}px`},crop:function(e){if(w){w.style.backgroundSize=`${g.containerData.width}px ${g.containerData.height}px`;let e=g.containerData.width-g.getCropBoxData().width;L.reflectX?w.style.backgroundPosition=`${-(-g.getCropBoxData().left-_+e)}px ${-g.getCropBoxData().top}px`:w.style.backgroundPosition=`${-g.getCropBoxData().left+_}px ${-g.getCropBoxData().top}px`}let t=Math.round(Math.abs(g.getCropBoxData().left-_)%g.containerData.width);_-g.getCropBoxData().left<=0?L.imgStartX=t:L.imgStartX=g.containerData.width-t>1&&t>1?g.containerData.width-t:0,L.imgStartY=Math.round(g.getCropBoxData().top),m.querySelector("input[name=imgStartX").value=Math.floor(100*L.imgStartX/g.containerData.width)+"%",m.querySelector("input[name=imgStartY").value=Math.floor(100*L.imgStartY/g.containerData.height)+"%";let o=+v.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-width"),i=+v.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-height"),c=g.cropBoxData.width/g.containerData.width*100,a=g.cropBoxData.height/g.containerData.height*100,l=1,s=1,d=1;(L.width>o||L.height>i)&&(l=L.width/o,s=L.height/i,d=l>=s?l:s),L.width=Math.round(o*c*d/100),L.height=Math.round(i*a*d/100),r(),n(2e3)}}),sharePdf.addEventListener("click",(e=>{e.preventDefault(),window.jsPDF=window.jspdf.jsPDF;let t=Math.trunc(595/L.width)-1;c=new jsPDF("p","pt","a4",!1),c.setFillColor(238,238,238),c.addImage(L.imgURl,void 0,(595-L.width*t)/2,100,L.width*t,L.height*t,void 0,void 0),c.save(document.title+".pdf")})),shareEmail.addEventListener("click",(()=>{shareEmail.setAttribute("href",`mailto:?subject=${document.title}&body=${window.location.href}`)})),shareLink.addEventListener("click",(e=>{e.preventDefault();let t=document.createElement("input");document.body.append(t),t.value=window.location.href,t.select(),document.execCommand("copy"),t.remove()})),document.querySelector(".total-product .main-btn").addEventListener("click",addToCart),window.addEventListener("scroll",(()=>{window.pageYOffset||document.documentElement.scrollTop;window.innerHeight-document.querySelector(".footer").getBoundingClientRect().bottom+30>=0?document.querySelector(".total-product__body").classList.add("hidden"):document.querySelector(".total-product__body").classList.remove("hidden")}))}})),document.querySelectorAll(".catalog__btn").forEach((e=>{e.addEventListener("click",(()=>{document.querySelectorAll(".catalog__btn").forEach((e=>e.classList.remove("active"))),document.querySelector(".catalog__items").style.opacity=0,setTimeout((()=>{e.classList.add("active"),document.querySelector(".catalog__items").setAttribute("data-column",e.getAttribute("data-column")),document.querySelector(".catalog__items").style.opacity=""}),150)}))}));const tippy=document.querySelectorAll(".tippy"),tippyContent=document.querySelector(".tippy-content");tippy&&(tippy.forEach((e=>{e.addEventListener("mouseenter",(()=>{tippyContent.textContent=e.getAttribute("data-content"),tippyContent.classList.add("show"),function(){let t=e.getBoundingClientRect().top,r=e.getBoundingClientRect().left;window.innerWidth<r+tippyContent.clientWidth+e.clientWidth?tippyContent.style.left=r-tippyContent.clientWidth+"px":tippyContent.style.left=r+e.clientWidth+"px",t-tippyContent.clientHeight<50?tippyContent.style.top=t+e.clientHeight+4+"px":tippyContent.style.top=t-tippyContent.clientHeight-4+"px"}()})),e.addEventListener("mouseleave",(()=>{tippyContent.textContent="",tippyContent.classList.remove("show")}))})),window.addEventListener("resize",(()=>{tippyContent.textContent="",tippyContent.classList.remove("show")})),window.addEventListener("scroll",(()=>{tippyContent.textContent="",tippyContent.classList.remove("show")})));const dataDelNav=document.querySelectorAll("[data-del-nav]"),dataDelBlock=document.querySelectorAll("[data-del-block]");dataDelNav&&dataDelBlock&&dataDelNav.forEach(((e,t)=>{e.addEventListener("change",(()=>{dataDelBlock.forEach((e=>{e.classList.remove("active")})),dataDelBlock[t].classList.add("active"),dataDelBlock[t].style.opacity="0",setTimeout((()=>{dataDelBlock[t].style.opacity="1"}),0)}))}));const cart=document.querySelector(".cart");cart&&(document.querySelector(".item-cart__comment-btn").addEventListener("click",(()=>{document.querySelector(".item-cart__comment-txt").classList.toggle("show")})),document.querySelector(".cart-del").querySelectorAll("input[type=radio]").forEach((e=>{e.addEventListener("change",(()=>{e.classList.contains("pickup")?document.querySelector(".cart-payment .pickup").classList.add("show"):document.querySelector(".cart-payment .pickup").classList.remove("show")}))})));const serviceAside=document.querySelector(".service-aside"),serviceBtn=document.querySelector(".service__mobBtn"),serviceLinks=document.querySelector(".service-aside__links");serviceAside&&(window.addEventListener("scroll",(()=>{const e=serviceLinks.querySelectorAll(".js-anchor");e.forEach(((t,r)=>{const o=t.getAttribute("href"),i=document.querySelector(`${o}`);let c=document.querySelector(".header__bottom").clientHeight+(parseInt(getComputedStyle(i).marginBottom)<30?20:parseInt(getComputedStyle(i).marginBottom)/2);if(i.getBoundingClientRect().top<c){e.forEach((e=>{e.classList.remove("active")})),t.classList.add("active");let r=serviceLinks.querySelector(".js-anchor.active").getBoundingClientRect().top-serviceLinks.getBoundingClientRect().top;serviceLinks.scrollTop=serviceLinks.scrollTop+r}}))})),serviceBtn&&(serviceBtn.addEventListener("click",(()=>{disableScroll(),serviceAside.classList.add("open")})),serviceAside.addEventListener("click",(e=>{(!serviceAside.querySelector(".service-aside__sticky").contains(e.target)||serviceAside.querySelector(".service-aside__close").contains(e.target)||e.target.classList.contains("js-anchor"))&&(serviceAside.classList.remove("open"),enableScroll())}))));let rangeSliders=document.querySelectorAll(".calc-range");function initRangeSliders(){rangeSliders.forEach((e=>{let t=e.querySelector("input[type=number"),r=e.querySelector(".calc-range__slider"),o=+e.getAttribute("data-initval"),i=+e.getAttribute("data-min"),c=+e.getAttribute("data-max");noUiSlider.create(r,{start:o,connect:[!0,!1],range:{min:i,max:c}}),t.addEventListener("change",(()=>{r.noUiSlider.set(t.value)})),r.noUiSlider.on("update",(function(e,r){t.value=parseInt(e[0]),setRangePrice()}))}))}function setRangePrice(){let e=document.querySelector(".calc-range__width").value,t=document.querySelector(".calc-range__height").value,r=+document.querySelector(".service-calc__areas input:checked").getAttribute("data-price");document.querySelector(".service-calc__price").textContent=String(Math.ceil(e*t/1e4*r)).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim()}rangeSliders&&(initRangeSliders(),document.querySelectorAll(".service-calc__areas input").forEach((e=>{e.addEventListener("change",setRangePrice)})));const itemReview=document.querySelectorAll(".item-review");if(itemReview){function showExtraBtn(){itemReview.forEach((e=>{let t=e.querySelector(".item-review__content").clientHeight;e.querySelector(".item-review__content").classList.remove("line-clamp");let r=e.querySelector(".item-review__content").clientHeight;e.querySelector(".item-review__content").classList.add("line-clamp"),r>t?e.querySelector(".item-review__body").classList.add("extra-btn-show"):e.querySelector(".item-review__body").classList.remove("extra-btn-show")}))}showExtraBtn(),window.addEventListener("resize",showExtraBtn)}const reviewSwipers=document.querySelectorAll(".item-review__images");reviewSwipers&&reviewSwipers.forEach((e=>{new Swiper(e,{slidesPerView:2.4,spaceBetween:8,observe:!0,observeParents:!0,breakpoints:{1690.98:{slidesPerView:5.1,spaceBetween:16},992.98:{slidesPerView:4.2,spaceBetween:16},575.98:{slidesPerView:4.5,spaceBetween:16},479.98:{slidesPerView:3.1,spaceBetween:16}}})})),document.querySelector(".det-reviews")&&document.querySelectorAll(".det-reviews__item").forEach((e=>{e.querySelector(".det-reviews__bar span").style.width=e.querySelector(".det-reviews__perc").textContent}));const portfolioPage=document.querySelector(".portfolio-page");portfolioPage&&portfolioPage.addEventListener("click",(e=>{portfolioPage.querySelectorAll("[data-fancy]").forEach((t=>{if(t.contains(e.target)){let e=[],r=[],o=[],i=[],c=t.getAttribute("data-fancy");portfolioPage.querySelectorAll("[data-fancy]").forEach((t=>{t.closest(".swiper-slide-duplicate")||t.getAttribute("data-fancy")!==c||(e.push(t.getAttribute("data-src")),r.push(t.nextElementSibling.textContent),o.push(t.getAttribute("data-art")),i.push(t.getAttribute("data-url")))}));let a=e.indexOf(t.getAttribute("data-src"));document.querySelector(".footer").insertAdjacentHTML("afterend",`\n          <div class="modal portfolio-modal" id="portfolio-modal">\n            <div class="modal__overlay">\n              <div class="modal__content">\n                <div class="modal__scroll">\n                  <div class="container">\n                    <button type="button" class="modal__close">${sprite("close")}</button>\n                    <div class="swiper-1 modal__swiper">\n                      <div class="swiper">\n                        <div class="swiper-wrapper">\n                          ${e.map(((e,t)=>`<div class="swiper-slide">\n                          <div class="mb-40">\n                            <h3>${r[t]}</h3>\n                            <span class="portfolio-modal__art">${o[t]}</span>\n                          </div>\n                          <div class="mb-40 portfolio-modal__preview">\n                            <div class="media-cover">\n                              <img src=${e} alt="${r[t]}">\n                            </div>\n                          </div>\n                          <a href="${i[t]}" class="btn main-btn">Заказать такую же</a>\n                           </div>`)).join("")}\n                        </div>\n                      </div>\n                      <div class="swiper-nav">\n                        <button type="button" class="nav-btn nav-btn--prev">${sprite("arrow-left")}</button>\n                        <button type="button" class="nav-btn nav-btn--next">${sprite("arrow-right")}</button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n         `);new Swiper(".portfolio-modal .swiper",{slidesPerView:1,observer:!0,observeParents:!0,initialSlide:a,effect:"fade",fadeEffect:{crossFade:!0},speed:500,navigation:{nextEl:document.querySelector(".portfolio-modal .nav-btn--next"),prevEl:document.querySelector(".portfolio-modal .nav-btn--prev")}});const n=document.querySelector(".portfolio-modal");openModal(n),n.addEventListener("click",(e=>{n.querySelector(".modal__content").contains(e.target)&&!n.querySelector(".modal__close").contains(e.target)||(closeModal(n),setTimeout((()=>{n.remove()}),animSpd))}))}}))}));