const customSelect=document.querySelectorAll(".custom-select"),overlay=document.querySelector(".overlay"),header=document.querySelector(".header"),iconMenu=document.querySelector(".icon-menu"),mobMenu=document.querySelector(".mobile-menu"),modalShowBtn=document.querySelectorAll(".modal-show-btn"),modal=document.querySelectorAll(".modal"),feedbackModal=document.querySelector(".feedback-modal"),cartModal=document.querySelector(".cart-modal"),successModal=document.querySelector(".success-modal"),errorModal=document.querySelector(".error-modal"),shareImg=document.querySelector(".share-modal__img"),sharePdf=document.querySelector(".share-modal__pdf"),shareEmail=document.querySelector(".share-modal__mail"),shareLink=document.querySelector(".share-modal__link");let paddingValue,animSpd=400;function sprite(e){return'<svg><use xlink:href="img/icons/sprite.svg#'+e+'"></use></svg>'}function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll")}function disableScroll(){paddingValue=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0,document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight=paddingValue)),document.body.style.paddingRight=paddingValue,document.body.classList.add("no-scroll")}function smoothDrop(e,t,r){if(t.style.overflow="hidden",t.style.transition=`height ${r}ms ease`,t.style["-webkit-transition"]=`height ${r}ms ease`,e.classList.contains("active")){e.classList.remove("open");let o=t.clientHeight+"px";t.style.height=o,setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active")}),r)}),0)}else{e.classList.add("open"),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active")}),r)}),0)}}function tabSwitch(e,t){e.forEach(((r,o)=>{r.addEventListener("click",(()=>{r.getAttribute("data-nav");e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),r.classList.add("active"),t[o].classList.add("active"),r.style.opacity="0",t[o].style.opacity="0",setTimeout((()=>{r.style.opacity="1",t[o].style.opacity="1"}),0)}))}))}function addToCart(){openModal(cartModal)}function formSuccess(e){e.querySelectorAll(".item-form").forEach((e=>e.classList.remove("error"))),e.querySelectorAll("input").forEach((e=>{["hidden","checkbox","radio"].includes(e.type)||(e.value=""),["checkbox","radio"].includes(e.type)&&!e.classList.contains("required")&&(e.checked=!1)})),e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector(".file-form__items")&&(e.querySelector(".file-form__items").innerHTML="");let t=document.querySelector(".modal.open");t?(t.classList.remove("open"),t.classList.contains("review-modal")?document.querySelector(".review-success-modal").classList.add("open"):successModal.classList.add("open")):openModal(successModal)}function mailFormSuccess(e){e.querySelector("input").value=""}function searchFormSuccess(e){e.querySelector("input").value="",e.querySelector(".search-form__reset").classList.remove("show"),e.querySelector(".search-form__submit").classList.add("disabled")}function openModal(e){mobMenu.classList.contains("open")||document.querySelector(".header__search.show")||disableScroll(),e.classList.add("open")}function closeModal(e){e.querySelector("video")&&e.querySelectorAll("video").forEach((e=>e.pause())),e.classList.remove("open"),setTimeout((()=>{mobMenu.classList.contains("open")||document.querySelector(".header__search.show")||enableScroll()}),animSpd)}modal.forEach((e=>{e.addEventListener("click",(t=>{(!e.querySelector(".modal__content").contains(t.target)||e.querySelector(".modal__close").contains(t.target)||e.querySelector(".success-close")&&e.querySelector(".success-close").contains(t.target))&&(closeModal(e),e.classList.contains("custom-select__options")&&closeSelectCustom(e.parentNode))}))})),modalShowBtn.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=e.getAttribute("data-modal");openModal(document.getElementById(r))}))}));const cityModal=document.querySelector(".city-modal");function scrollPos(){return window.pageYOffset||document.documentElement.scrollTop}cityModal&&(cityModal.querySelector(".main-btn").addEventListener("click",(()=>closeModal(cityModal))),cityModal.querySelector(".stroke-btn").addEventListener("click",(()=>{closeModal(cityModal),setTimeout((()=>{openModal(document.querySelector(".city-search-modal"))}),animSpd)}))),$(".js-anchor").click((function(e){e.preventDefault();let t=$(this).attr("href"),r=$(t).offset().top,o=r<scrollPos()&&scrollPos()>150&&!serviceScroll?$(".header__bottom").height():0;return $("html,body").animate({scrollTop:r-20-o},500)}));let lastScroll=scrollPos(),serviceScroll=!1;window.addEventListener("scroll",(()=>{document.querySelector(".header__top").getBoundingClientRect().bottom<0?(header.classList.add("fixed"),document.querySelector(".header__bottom").classList.add("fixed-block"),scrollPos()>lastScroll&&scrollPos()>150&&!header.classList.contains("unshow")||scrollPos()>150&&serviceScroll?header.classList.add("unshow"):scrollPos()<lastScroll&&header.classList.contains("unshow")&&header.classList.remove("unshow")):(header.classList.remove("fixed"),document.querySelector(".header__bottom").classList.remove("fixed-block")),lastScroll=scrollPos()})),iconMenu.addEventListener("click",(()=>{disableScroll(),mobMenu.classList.add("open")})),window.addEventListener("resize",(()=>{window.innerWidth>992.98&&mobMenu.classList.contains("open")&&mobMenu.querySelector(".mobile-menu__close").click()})),mobMenu.addEventListener("click",(e=>{mobMenu.querySelector(".mobile-menu__inner").contains(e.target)&&!mobMenu.querySelector(".mobile-menu__close").contains(e.target)||(mobMenu.classList.remove("open"),enableScroll())}));const searchToggle=document.querySelector(".search-toggle"),searchClose=document.querySelector(".search__close");searchToggle.addEventListener("click",(()=>{document.querySelector(".header__search").classList.add("show"),disableScroll(),overlay.classList.add("show")})),searchClose.addEventListener("click",(()=>{document.querySelector(".header__search").classList.remove("show"),overlay.classList.remove("show"),setTimeout((()=>{enableScroll()}),animSpd)})),overlay.addEventListener("click",(()=>{searchClose.click()}));const searchForm=document.querySelectorAll(".search-form");searchForm&&searchForm.forEach((e=>{e.querySelector("input").addEventListener("input",(()=>{e.querySelector("input").value.length>0?(e.querySelector(".search-form__reset").classList.add("show"),e.querySelector(".search-form__submit")&&e.querySelector("input").value.length>2?e.querySelector(".search-form__submit").classList.remove("disabled"):e.querySelector(".search-form__submit").classList.add("disabled")):e.querySelector(".search-form__reset").classList.remove("show")})),e.addEventListener("reset",(()=>{e.querySelector(".search-form__reset").classList.remove("show"),e.querySelector(".search-form__submit")&&e.querySelector(".search-form__submit").classList.add("disabled")}))}));const inp=document.querySelectorAll("input[type=tel]");inp&&inp.forEach((e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)}));const lazyVid=document.querySelectorAll(".lazy-video");function addFile(e,t){for(let r=0;r<e.length;r++){let o=e[r];if(o.size>10485760)return t.querySelector("input").value="",t.querySelector(".file-form__items").innerHTML="",t.classList.add("error"),t.querySelectorAll(".file-form__item").forEach((e=>e.remove())),void(t.querySelector(".item-form__error").textContent="Файл должен быть менее 10 МБ");if(!fileTypes.includes(o.type))return t.querySelector("input").value="",t.querySelector(".file-form__items").innerHTML="",t.classList.add("error"),t.querySelectorAll(".file-form__item").forEach((e=>e.remove())),void(t.querySelector(".item-form__error").textContent="Разрешённые форматы: png, jpg");{t.classList.remove("error"),t.querySelector(".item-form__error").textContent="";let e=new FileReader;e.readAsDataURL(o),e.onload=()=>{t.querySelector(".file-form__items").innerHTML+=`<div class="file-form__item">\n        <img src=${e.result} alt="">\n        <div class="file-form__name">${o.name}</div>\n        <div class="file-form__size">${(o.size/1048576).toFixed(2)}Mb</div>\n        <div class="file-form__del">${sprite("close")}</div>\n       </div>\n      `},e.onerror=()=>{console.log(e.error)}}}}lazyVid&&lazyVid.forEach((e=>{e.addEventListener("click",(function t(){if(e.querySelectorAll("[data-src]").forEach((t=>{t.src=t.dataset.src,t.removeAttribute("data-src"),e.classList.remove("lazy-video")})),e.querySelector("video")&&e.querySelector("video").load(),e.querySelector("iframe")){var r=e.querySelector("iframe").src.indexOf("?")>-1?"&":"?";e.querySelector("iframe").src+=r+"autoplay=1&mute=1",e.querySelector("iframe").setAttribute("allow","autoplay; encrypted-media")}e.classList.add("play"),e.removeEventListener("click",t)}))}));let fileTypes=["image/png","image/jpeg"];document.querySelectorAll(".file-form").forEach((e=>{e.querySelector("input").addEventListener("change",(t=>{e.querySelectorAll(".file-form__item").forEach((e=>e.remove())),addFile(t.target.files,e)})),e.addEventListener("click",(t=>{e.querySelectorAll(".file-form__del").forEach(((r,o)=>{if(r.contains(t.target)){const t=new DataTransfer,i=e.querySelector("input"),{files:c}=i;for(let e=0;e<c.length;e++){let r=c[e];e!==o&&t.items.add(r)}i.files=t.files,setTimeout((()=>{r.parentNode.remove()}),0)}}))})),e.addEventListener("dragenter",(e=>{e.preventDefault()})),e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("dragleave",(e=>{e.preventDefault()})),e.addEventListener("drop",(function(t){t.preventDefault();let r=Array.from(t.dataTransfer.files);e.querySelector("input").files=t.dataTransfer.files,e.querySelector(".file-form__items").innerHTML="",addFile(r,e)}))}));const swiper1=document.querySelectorAll(".swiper-1");swiper1&&swiper1.forEach((e=>{new Swiper(e.querySelector(".swiper"),{observe:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:800,allowTouchMove:!1,navigation:{nextEl:e.querySelector(".nav-btn--next"),prevEl:e.querySelector(".nav-btn--prev")}})}));let bestSwiper,initBest=!1;const bestsellers=document.querySelector(".bestsellers");if(bestsellers){function initTheBestsSwiper(){window.innerWidth<=992.98&&!initBest?(initBest=!0,bestSwiper=new Swiper(bestsellers.querySelector(".swiper"),{slidesPerView:1.13,spaceBetween:20,observe:!0,observeParents:!0,speed:800,navigation:{nextEl:bestsellers.querySelector(".nav-btn--next"),prevEl:bestsellers.querySelector(".nav-btn--prev")},breakpoints:{699.98:{slidesPerView:2}}})):window.innerWidth>992.98&&initBest&&(initBest=!1,bestSwiper.destroy())}initTheBestsSwiper(),window.addEventListener("resize",initTheBestsSwiper)}const mainArt=document.querySelector(".main-articles");if(mainArt){new Swiper(mainArt.querySelector(".swiper"),{slidesPerView:1.13,spaceBetween:20,observe:!0,observeParents:!0,speed:800,navigation:{nextEl:mainArt.querySelector(".nav-btn--next"),prevEl:mainArt.querySelector(".nav-btn--prev")},breakpoints:{1690.98:{slidesPerView:4,spaceBetween:30},992.98:{slidesPerView:4,spaceBetween:20},699.98:{slidesPerView:2.46,spaceBetween:20}}})}$(".accordion__header").on("click",(function(){$(".accordion").each((function(){$(this).find("video").length>0&&$(this).find("video").get(0).pause()})),$(this).toggleClass("open").siblings(".accordion__body").slideToggle().parents(".accordion").siblings(".accordion").find(".accordion__header").removeClass("open").siblings(".accordion__body").slideUp()}));const filterAcc=document.querySelectorAll(".filter-acc");filterAcc.forEach((e=>{e.querySelector(".filter-acc__header").addEventListener("click",(t=>{["input","label"].includes(t.target.localName)||smoothDrop(e.querySelector(".filter-acc__header"),e.querySelector(".filter-acc__body"),500)}))}));const cardSwiper=document.querySelectorAll(".card-swiper");cardSwiper&&cardSwiper.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:1.13,spaceBetween:20,observe:!0,observeParents:!0,navigation:{prevEl:e.querySelector(".nav-btn--prev"),nextEl:e.querySelector(".nav-btn--next")},speed:800,breakpoints:{1690.98:{slidesPerView:4,spaceBetween:30},992.98:{slidesPerView:4,spaceBetween:20},699.98:{slidesPerView:2,spaceBetween:20}}})}));const filter=document.querySelector(".filter"),filterSelected=document.querySelector(".filter-selected__items");if(filter&&filterSelected){const e={checkInp:function(e){e.checked=!0,e.setAttribute("checked",!0)},uncheckInp:function(e){e.checked=!1,e.removeAttribute("checked")},setSelected:function(e){let t=e.parentNode.querySelector("span:last-child").textContent,r=e.getAttribute("data-id");filterSelected.insertAdjacentHTML("afterbegin",`<div class="filter-selected__item" data-target="${r}">${t}${sprite("close")}</div>`)},removeSelected:function(e){filterSelected.querySelector(`[data-target="${e}"]`)&&filterSelected.querySelector(`[data-target="${e}"]`).remove()},selectedOnClick:function(e){filterSelected.querySelectorAll(".filter-selected__item").forEach(((t,r)=>{if(t.contains(e.target)){let e=t.getAttribute("data-target");filter.querySelectorAll("input")[e].click(),t.remove()}}))},resetFilter:function(){filter.querySelectorAll("label input").forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),filterSelected.innerHTML=""}};filter.querySelectorAll("label input").forEach(((t,r)=>{t.setAttribute("data-id",r);let o=t.getAttribute("data-id");if(t.addEventListener("change",(()=>{t.checked?e.setSelected(t):e.removeSelected(o)})),t.parentNode.parentNode.classList.contains("filter-acc__header")){let r=t.closest(".filter-acc").querySelector(".filter-acc__body").querySelectorAll("label input");t.addEventListener("change",(()=>{t.checked?r.forEach((t=>{e.checkInp(t),e.removeSelected(t.getAttribute("data-id"))})):r.forEach((t=>e.uncheckInp(t)))})),r.forEach((i=>{i.addEventListener("change",(()=>{Array.from(r).every((e=>e.checked))?(e.checkInp(t),setTimeout((()=>{r.forEach((t=>{e.removeSelected(t.getAttribute("data-id"))})),e.setSelected(t)}),0)):t.checked&&(e.uncheckInp(t),e.removeSelected(o),r.forEach((t=>{t.checked&&e.setSelected(t)})))}))}))}})),filterSelected.addEventListener("click",(t=>e.selectedOnClick(t))),document.querySelector(".filter-selected__reset").addEventListener("click",(()=>e.resetFilter())),filter.querySelector(".filter__form").addEventListener("reset",(()=>e.resetFilter())),document.querySelector(".filter-icon").addEventListener("click",(()=>{disableScroll(),filter.classList.add("open")})),filter.addEventListener("click",(e=>{filter.querySelector(".filter__form").contains(e.target)&&!filter.querySelector(".filter__close").contains(e.target)||(filter.classList.remove("open"),enableScroll())}))}const extraList=document.querySelectorAll(".extra-list");extraList&&extraList.forEach((e=>{let t=e.querySelector(".extra-list__btn").getAttribute("data-open"),r=e.querySelector(".extra-list__btn").getAttribute("data-close");e.querySelector(".extra-list__btn").addEventListener("click",(()=>{e.classList.contains("open")?(e.classList.remove("open"),e.querySelector(".extra-list__btn span").textContent=t):(e.classList.add("open"),e.querySelector(".extra-list__btn span").textContent=r)}))}));const quantity=document.querySelectorAll(".quantity");function openSelectCustom(e){e.classList.add("open"),e.setAttribute("aria-expanded",!0),e.querySelectorAll(".custom-select__options input").forEach((t=>{t.addEventListener("change",(t=>{setActiveOption(e),closeSelectCustom(e)}))})),document.addEventListener("click",(function t(r){e.contains(r.target)||(closeSelectCustom(e),document.removeEventListener("click",t))}))}function setActiveOption(e){let t=e.querySelector("input:checked").nextElementSibling.innerHTML;e.querySelector(".custom-select__selected span").innerHTML=t}function closeSelectCustom(e){e.classList.remove("open"),e.setAttribute("aria-expanded",!1),e.querySelector(".modal.open")&&closeModal(e.querySelector(".modal"))}quantity&&quantity.forEach((e=>{const t=e.querySelector("input");e.querySelector(".js-minus").addEventListener("click",(()=>{t.value>1&&t.value--})),e.querySelector(".js-plus").addEventListener("click",(()=>{t.value++})),t.addEventListener("change",(e=>{Number.isInteger(e.target.value)||e.target.value>0?t.value=e.target.value:t.value=1}))})),customSelect&&customSelect.forEach((e=>{e.querySelector(".custom-select__selected").addEventListener("click",(()=>{e.classList.contains("open")?closeSelectCustom(e):(window.innerWidth<992.98&&e.querySelector(".modal")&&openModal(e.querySelector(".modal")),openSelectCustom(e))})),window.addEventListener("resize",(()=>{window.innerWidth>992.98&&e.querySelector(".modal.open")?closeModal(e.querySelector(".modal")):window.innerWidth<992.98&&e.querySelector(".modal")&&!e.querySelector(".modal.open")&&closeSelectCustom(e)}))}));const intro=document.querySelector(".intro");if(intro){document.querySelectorAll(".intro-thumb__nmb").forEach((e=>+e.textContent<10?e.textContent="0"+e.textContent:""));let t=new Swiper(".intro__thumbswiper",{slidesPerView:1,spaceBetween:56,observe:!0,observeParents:!0,speed:1e3,loop:!0,freeMode:!0,navigation:{nextEl:intro.querySelector(".nav-btn--next"),prevEl:intro.querySelector(".nav-btn--prev")},breakpoints:{1690.98:{slidesPerView:4,spaceBetween:54},1090.98:{slidesPerView:3,spaceBetween:24},992.98:{slidesPerView:2,spaceBetween:24}}}),r=new Swiper(".intro__bgswiper",{observe:!0,observeParents:!0,speed:1e3,loop:!0,watchSlidesProgress:!0,parallax:!0,thumbs:{swiper:t},navigation:{nextEl:intro.querySelector(".nav-btn--next"),prevEl:intro.querySelector(".nav-btn--prev")}}),o=new Swiper(".intro__textswiper",{observe:!0,observeParents:!0,speed:1e3,loop:!0,effect:"fade",fadeEffect:{crossFade:!0},allowTouchMove:!1,navigation:{nextEl:intro.querySelector(".nav-btn--next"),prevEl:intro.querySelector(".nav-btn--prev")}});r.on("slideChange",(()=>{o.slideTo(r.activeIndex)}))}const product=document.querySelector(".product"),itemTexture=document.querySelectorAll(".item-texture"),textureModal=document.querySelector(".texture-modal"),textureAllModal=document.querySelector("#texture-modal-all"),orderForm=document.querySelector("#orderPafarmsForm"),colorize=document.querySelector(".params-product__colorize"),reflect=document.querySelector(".params-product__reflect"),greyscale=document.querySelector(".params-product__greyscale"),sizeProduct=document.querySelector(".size-product"),imageCrop=document.getElementById("imageCrop"),mainImg=document.querySelector(".main-product__img");let initialData,modifiedData,cropper,cropperCanvas,cropBox,lastCallTimer,doc,interval,checkedWidth,checkedHeight,shiftImg=0,previousCall=0,lastCall=Date.now(),isClicking=!1,activeTextureIdx=0,touchscreen=!1;if(product){function checkedData(){return{width:+sizeProduct.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-width"),height:+sizeProduct.querySelector(".custom-select").querySelector("input[type=radio]:checked").getAttribute("data-height")}}function setTotal(){document.querySelector(".total-product__price").textContent=String(modifiedData.designPrice?modifiedData.priceDesign:modifiedData.priceStandart).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim(),document.querySelector(".total-product__square").textContent=modifiedData.square,modifiedData.priceTotal=Math.round(modifiedData.square*(modifiedData.designPrice?modifiedData.priceDesign:modifiedData.priceStandart)),orderForm.querySelector("input[name=priceTotal]").value=modifiedData.priceTotal,document.querySelector(".total-product__totalprice").textContent=String(modifiedData.priceTotal).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim(),document.querySelector(".total-product__mobprice").textContent=String(modifiedData.priceTotal).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim()}function setDesignPrice(){modifiedData.reflectX||modifiedData.greyscale||modifiedData.selfSize?modifiedData.designPrice=!0:modifiedData.designPrice=!1,orderForm.querySelector("input[name=designPrice]").value=modifiedData.designPrice,setTotal()}function setSize(){modifiedData.square=(modifiedData.width*modifiedData.height/1e4).toFixed(2),modifiedData.aRatio=modifiedData.width/modifiedData.height,orderForm.querySelector("input[name=square]").value=modifiedData.square,orderForm.querySelector("input[name=aRatio]").value=modifiedData.aRatio,orderForm.querySelector("input[name=width]").value=modifiedData.width,orderForm.querySelector("input[name=height]").value=modifiedData.height,sizeProduct.querySelector("input[name=selfWidth]").value=modifiedData.width,sizeProduct.querySelector("input[name=selfHeight]").value=modifiedData.height,document.querySelector(".main-product__width span").textContent=modifiedData.width,document.querySelector(".main-product__width .main-product__line").style.width=cropper.cropBoxData.width/cropper.containerData.width*100+"%",document.querySelector(".main-product__height span").textContent=modifiedData.height,document.querySelector(".main-product__height .main-product__line").style.height=cropper.cropBoxData.height/cropper.containerData.height*100+"%",setTotal()}function imgStartX(e){e.target.classList.contains("prev")?modifiedData.reflectX?shiftImg-=7.5:shiftImg+=7.5:modifiedData.reflectX?shiftImg+=7.5:shiftImg-=7.5,cropperCanvas.style.backgroundPosition=`${shiftImg}px center`,mainImg.style.backgroundPosition=`${document.querySelector(".main-product__btn").clientWidth+shiftImg}px center`,cropper.setCropBoxData(cropper.getCropBoxData())}function setImg(e){lastCall=Date.now(),lastCall-previousCall<=e&&clearTimeout(lastCallTimer),lastCallTimer=setTimeout((async()=>{cropBox&&modifiedData.selfSize?await htmlToImage.toJpeg(cropBox).then((function(e){modifiedData.imgURl=e})).catch((function(e){modifiedData.imgURl=initialData.imgURl,console.error("oops, something went wrong!",e)})):modifiedData.imgURl=initialData.imgURl,shareImg.setAttribute("href",modifiedData.imgURl),shareImg.download=document.title+".jpeg"}),e)}initialData={width:+orderForm.querySelector("input[name=width]").value,height:+orderForm.querySelector("input[name=height]").value,aRatio:+orderForm.querySelector("input[name=aRatio]").value,aRatioDefault:+orderForm.querySelector("input[name=aRatioDefault]").value,square:+orderForm.querySelector("input[name=square]").value,greyscale:+orderForm.querySelector("input[name=greyscale]").value,reflectX:+orderForm.querySelector("input[name=reflectX]").value,imgStartX:+orderForm.querySelector("input[name=imgStartX]").value,imgStartY:+orderForm.querySelector("input[name=imgStartY]").value,cropped:+orderForm.querySelector("input[name=cropped]").value,colorize:+orderForm.querySelector("input[name=colorize]").value,texture:orderForm.querySelector("input[name=texture]").value,selfSize:+orderForm.querySelector("input[name=selfSize]").value,designPrice:+orderForm.querySelector("input[name=designPrice]").value,priceStandart:+orderForm.querySelector("input[name=priceStandart]").value,priceDesign:+orderForm.querySelector("input[name=priceDesign]").value,priceTotal:+orderForm.querySelector("input[name=priceTotal]").value,imgURl:orderForm.querySelector("input[name=imgURl]").value},modifiedData=Object.assign({},initialData),checkedWidth=checkedData().width,checkedHeight=checkedData().height,setImg(2e3),document.querySelector(".main-product__mainImg .media-contain").style.paddingTop=initialData.height/initialData.width*100+"%",document.querySelector(".main-product__ratio span").style.paddingTop=initialData.height/initialData.width*100+"%";new Swiper(".main-product__swiper",{slidesPerView:3,spaceBetween:20,observer:!0,observeParents:!0,speed:800,breakpoints:{1690.98:{slidesPerView:3.55,spaceBetween:12}}});if(textureModal){function selectTexture(){itemTexture.forEach((e=>{e.classList.remove("selected")})),product.querySelectorAll(".item-texture")[activeTextureIdx].classList.add("selected"),textureAllModal.querySelectorAll(".item-texture")[activeTextureIdx].classList.add("selected");let e=textureModal.querySelectorAll(".swiper-slide")[activeTextureIdx].getAttribute("data-texture-name"),t=textureModal.querySelectorAll(".swiper-slide")[activeTextureIdx].getAttribute("data-texture-priceStandart"),r=textureModal.querySelectorAll(".swiper-slide")[activeTextureIdx].getAttribute("data-texture-priceDesign");modifiedData.texture=e,modifiedData.priceStandart=t,modifiedData.priceDesign=r,orderForm.querySelector("input[name=texture]").value=e,orderForm.querySelector("input[name=priceStandart").value=t,orderForm.querySelector("input[name=priceDesign").value=r,setTotal(),closeModal(textureModal)}const i=new Swiper(textureModal.querySelector(".swiper"),{slidesPerview:1,observe:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:800,navigation:{nextEl:textureModal.querySelector(".nav-btn--next"),prevEl:textureModal.querySelector(".nav-btn--prev")}});i.on("slideChange",(()=>{textureModal.querySelector("video")&&textureModal.querySelectorAll("video").forEach((e=>{e.pause()}))})),product.querySelectorAll(".item-texture").forEach(((e,t)=>{e.addEventListener("click",(r=>{e.querySelector(".item-texture__play").contains(r.target)?(i.slideTo(t),openModal(textureModal)):(activeTextureIdx=t,selectTexture())}))})),textureModal.querySelector(".texture-modal__btn").addEventListener("click",(e=>{activeTextureIdx=i.realIndex,selectTexture()})),textureAllModal.querySelectorAll(".item-texture").forEach(((e,t)=>{e.addEventListener("click",(r=>{e.querySelector(".item-texture__play").contains(r.target)?(i.slideTo(t),closeModal(textureAllModal),openModal(textureModal)):(textureAllModal.querySelectorAll(".item-texture").forEach((e=>e.classList.remove("selected"))),e.classList.add("selected"),activeTextureIdx=t)}))})),textureAllModal.querySelector(".main-btn").addEventListener("click",(()=>{selectTexture(),closeModal(textureAllModal)})),document.querySelectorAll(".texture-modal__resetBtn").forEach((e=>{e.addEventListener("click",(e=>{activeTextureIdx=0,selectTexture(),closeModal(textureAllModal),closeModal(textureModal)}))})),window.addEventListener("resize",(()=>{window.innerWidth>699.98&&textureAllModal.classList.contains("open")&&closeModal(textureAllModal)}))}colorize.querySelector("input").addEventListener("change",(e=>{modifiedData.colorize=e.target.checked,orderForm.querySelector("input[name=colorize]").value=e.target.checked})),reflect.querySelector("input").addEventListener("change",(e=>{modifiedData.reflectX=e.target.checked,orderForm.querySelector("input[name=reflectX]").value=e.target.checked,e.target.checked?cropper.scale(-1,1):cropper.scale(1,1),mainImg.classList.toggle("reverse"),cropperCanvas.classList.toggle("reverse"),cropBox.classList.toggle("reverse"),setDesignPrice(),document.querySelector(".size-product__btn.self-size").classList.contains("active")||document.querySelector(".size-product__btn.self-size").click()})),greyscale.querySelector("input").addEventListener("change",(e=>{modifiedData.greyscale=e.target.checked,orderForm.querySelector("input[name=greyscale]").value=e.target.checked,mainImg.classList.toggle("greyscale"),cropperCanvas.classList.toggle("greyscale"),cropBox.classList.toggle("greyscale"),setDesignPrice(),document.querySelector(".size-product__btn.self-size").classList.contains("active")||document.querySelector(".size-product__btn.self-size").click()})),sizeProduct.querySelectorAll(".size-product__btn").forEach((e=>{e.addEventListener("click",(()=>{sizeProduct.querySelectorAll(".size-product__btn").forEach((e=>{e.classList.remove("active")})),e.classList.toggle("active"),e.classList.contains("self-size")?(modifiedData.selfSize=!0,document.querySelector(".main-product__size").classList.remove("size-show"),document.querySelector(".main-product__preview").classList.remove("crop-hidden"),cropper.resize()):(shiftImg=0,modifiedData.selfSize=!1,modifiedData.imgStartX="0%",checkedWidth=checkedData().width,checkedHeight=checkedData().height,modifiedData.width=checkedData().width,modifiedData.height=checkedData().height,document.querySelector(".main-product__size").classList.add("size-show"),document.querySelector(".main-product__preview").classList.add("crop-hidden"),mainImg.style.backgroundPosition=null,cropper.reset(),cropperCanvas.style.backgroundPosition=`${shiftImg}px center`,cropper.setCropBoxData(cropper.getCropBoxData()),setSize()),orderForm.querySelector("input[name=selfSize]").value=modifiedData.selfSize,setDesignPrice()}))})),sizeProduct.querySelector(".custom-select").querySelectorAll("input").forEach((e=>{e.addEventListener("change",(()=>{modifiedData.width=+e.getAttribute("data-width"),modifiedData.height=+e.getAttribute("data-height"),checkedWidth=checkedData().width,checkedHeight=checkedData().height,setSize()}))})),sizeProduct.querySelector(".size-product__fixed").addEventListener("change",(e=>{e.target.checked?cropper.options.aspectRatio=modifiedData.aRatio:cropper.options.aspectRatio=""})),document.querySelectorAll(".size-product__inp input").forEach((e=>{e.addEventListener("change",(e=>{if(Number.isInteger(e.target.value)||e.target.value>0){let t=checkedData().width,r=checkedData().height;sizeProduct.querySelector(".size-product__fixed").checked&&("selfHeight"==e.target.name?sizeProduct.querySelector("input[name=selfWidth]").value=Math.round(sizeProduct.querySelector("input[name=selfWidth]").value*(e.target.value/modifiedData.height)):"selfWidth"==e.target.name&&(sizeProduct.querySelector("input[name=selfHeight]").value=Math.round(sizeProduct.querySelector("input[name=selfHeight]").value*(e.target.value/modifiedData.width))));let o=Math.round(sizeProduct.querySelector("input[name=selfWidth]").value),i=Math.round(sizeProduct.querySelector("input[name=selfHeight]").value),c=o/t*100,a=i/r*100,l=1,n=1;c>100&&(l=c/100),a>100&&(n=a/100),c>a?a/=l:c<a&&(c/=n),o>checkedWidth&&"selfWidth"==e.target.name&&(checkedHeight*=o/checkedWidth,checkedWidth=o),i>checkedHeight&&"selfHeight"==e.target.name&&(checkedWidth*=i/checkedHeight,checkedHeight=i),o<checkedWidth&&i<checkedHeight&&(o>t||i>r?o>i?(checkedHeight*=o/checkedWidth,checkedWidth=o):(checkedWidth*=i/checkedHeight,checkedHeight=i):(checkedWidth=t,checkedHeight=r));let s={left:(cropper.containerData.width-cropper.containerData.width*c/100)/2,top:(cropper.containerData.height-cropper.containerData.height*a/100)/2,width:c>100?cropper.containerData.width:cropper.containerData.width*c/100,height:a>100?cropper.containerData.height:cropper.containerData.height*a/100};cropper.setCropBoxData(s)}else sizeProduct.querySelector("input[name=selfWidth]").value=modifiedData.width,sizeProduct.querySelector("input[name=selfHeight]").value=modifiedData.height}))})),document.querySelectorAll(".main-product__btn").forEach((e=>{e.addEventListener("mousedown",(e=>{clearInterval(interval),interval=setInterval((()=>{imgStartX(e)}),70)})),e.addEventListener("mouseup",(e=>{clearInterval(interval)})),e.addEventListener("mouseleave",(e=>{clearInterval(interval)})),e.addEventListener("touchstart",(e=>{e.preventDefault(),clearInterval(interval),interval=setInterval((()=>{imgStartX(e)}),70)})),e.addEventListener("touchend",(e=>{e.preventDefault(),clearInterval(interval)}))})),cropper=new Cropper(imageCrop,{viewMode:2,movable:!1,zoomable:!1,rotatable:!1,autoCropArea:1,dragMode:"none",ready:function(e){cropper.zoomTo(1),cropperCanvas=document.querySelector(".cropper-canvas"),cropperCanvas.style.backgroundImage=`url(${cropper.image.currentSrc}`,document.querySelector(".cropper-view-box").innerHTML+="<span></span>",cropBox=document.querySelector(".cropper-view-box span"),cropBox.style.backgroundImage=`url(${cropper.image.currentSrc}`,cropBox.style.backgroundSize=`${cropper.containerData.width}px ${cropper.containerData.height}px`,cropBox.style.backgroundPosition=`-${cropper.getCropBoxData().left-shiftImg}px -${cropper.getCropBoxData().top}px`},crop:function(e){if(cropBox){cropBox.style.backgroundSize=`${cropper.containerData.width}px ${cropper.containerData.height}px`;let e=cropper.containerData.width-cropper.getCropBoxData().width;modifiedData.reflectX?cropBox.style.backgroundPosition=`${-(-cropper.getCropBoxData().left-shiftImg+e)}px ${-cropper.getCropBoxData().top}px`:cropBox.style.backgroundPosition=`${-cropper.getCropBoxData().left+shiftImg}px ${-cropper.getCropBoxData().top}px`}let t=Math.round(Math.abs(cropper.getCropBoxData().left-shiftImg)%cropper.containerData.width);shiftImg-cropper.getCropBoxData().left<=0?modifiedData.imgStartX=t:modifiedData.imgStartX=cropper.containerData.width-t>1&&t>1?cropper.containerData.width-t:0,modifiedData.imgStartY=Math.round(cropper.getCropBoxData().top),orderForm.querySelector("input[name=imgStartX").value=Math.floor(100*modifiedData.imgStartX/cropper.containerData.width)+"%",orderForm.querySelector("input[name=imgStartY").value=Math.floor(100*modifiedData.imgStartY/cropper.containerData.height)+"%";let r=cropper.cropBoxData.width/cropper.containerData.width*100,o=cropper.cropBoxData.height/cropper.containerData.height*100;modifiedData.width=Math.round(checkedWidth*r/100),modifiedData.height=Math.round(checkedHeight*o/100),setSize(),setImg(2e3)},cropmove:function(e){cropper.cropBoxData.left<=1&&console.log("left"),cropper.cropBoxData.left+cropper.cropBoxData.width>=cropper.cropBoxData.maxWidth&&console.log("right")},cropend:function(){console.log("h")}}),sharePdf.addEventListener("click",(e=>{e.preventDefault(),window.jsPDF=window.jspdf.jsPDF;let t=Math.trunc(595/modifiedData.width)-1;doc=new jsPDF("p","pt","a4",!1),doc.setFillColor(238,238,238),doc.addImage(modifiedData.imgURl,void 0,(595-modifiedData.width*t)/2,100,modifiedData.width*t,modifiedData.height*t,void 0,void 0),doc.save(document.title+".pdf")})),shareEmail.addEventListener("click",(()=>{shareEmail.setAttribute("href",`mailto:?subject=${document.title}&body=${window.location.href}`)})),shareLink.addEventListener("click",(e=>{e.preventDefault();let t=document.createElement("input");document.body.append(t),t.value=window.location.href,t.select(),document.execCommand("copy"),t.remove()})),document.querySelector(".total-product .main-btn").addEventListener("click",addToCart),window.addEventListener("scroll",(()=>{window.innerHeight-document.querySelector(".footer").getBoundingClientRect().bottom+30>=0?document.querySelector(".total-product__body").classList.add("hidden"):document.querySelector(".total-product__body").classList.remove("hidden")}))}document.querySelectorAll(".catalog__btn").forEach((e=>{e.addEventListener("click",(()=>{document.querySelectorAll(".catalog__btn").forEach((e=>e.classList.remove("active"))),document.querySelector(".catalog__items").style.opacity=0,setTimeout((()=>{e.classList.add("active"),document.querySelector(".catalog__items").setAttribute("data-column",e.getAttribute("data-column")),document.querySelector(".catalog__items").style.opacity=""}),150)}))}));const tippy=document.querySelectorAll(".tippy"),tippyContent=document.querySelector(".tippy-content");tippy&&(tippy.forEach((e=>{e.addEventListener("mouseenter",(()=>{tippyContent.textContent=e.getAttribute("data-content"),tippyContent.classList.add("show"),function(){let t=e.getBoundingClientRect().top,r=e.getBoundingClientRect().left;window.innerWidth<r+tippyContent.clientWidth+e.clientWidth?tippyContent.style.left=r-tippyContent.clientWidth+"px":tippyContent.style.left=r+e.clientWidth+"px",t-tippyContent.clientHeight<50?tippyContent.style.top=t+e.clientHeight+4+"px":tippyContent.style.top=t-tippyContent.clientHeight-4+"px"}()})),e.addEventListener("mouseleave",(()=>{tippyContent.textContent="",tippyContent.classList.remove("show")}))})),window.addEventListener("resize",(()=>{tippyContent.textContent="",tippyContent.classList.remove("show")})),window.addEventListener("scroll",(()=>{tippyContent.textContent="",tippyContent.classList.remove("show")})));const delNav=document.querySelectorAll("[data-del-nav]"),delBlock=document.querySelectorAll("[data-del-block]");delNav&&delBlock&&delNav.forEach(((e,t)=>{e.addEventListener("change",(()=>{delBlock.forEach((e=>{e.classList.remove("active")})),delBlock[t].classList.add("active"),delBlock[t].style.opacity="0",setTimeout((()=>{delBlock[t].style.opacity="1"}),0)}))}));const cart=document.querySelector(".cart");cart&&(document.querySelector(".item-cart__comment-btn").addEventListener("click",(()=>{document.querySelector(".item-cart__comment-txt").classList.toggle("show")})),document.querySelector(".cart-del").querySelectorAll("input[type=radio]").forEach((e=>{e.addEventListener("change",(()=>{e.classList.contains("pickup")?document.querySelector(".cart-payment .pickup").classList.add("show"):document.querySelector(".cart-payment .pickup").classList.remove("show")}))})));const serviceAside=document.querySelector(".service-aside"),serviceBtn=document.querySelector(".service__mobBtn"),serviceLinks=document.querySelector(".service-aside__links");serviceAside&&(window.addEventListener("scroll",(()=>{serviceScroll=window.innerWidth>992.98&&serviceAside.getBoundingClientRect().bottom>0;const e=serviceLinks.querySelectorAll(".js-anchor");e.forEach(((t,r)=>{const o=t.getAttribute("href"),i=document.querySelector(`${o}`);let c=parseInt(getComputedStyle(i).marginBottom)<30?20:parseInt(getComputedStyle(i).marginBottom)/2;if(header.classList.contains("unshow")||(c=document.querySelector(".header__bottom").clientHeight+c),parseInt(i.getBoundingClientRect().top)<=c){e.forEach((e=>{e.classList.remove("active")})),t.classList.add("active");let r=serviceLinks.querySelector(".js-anchor.active").getBoundingClientRect().top-serviceLinks.getBoundingClientRect().top;serviceLinks.scrollTop=parseInt(serviceLinks.scrollTop+r)}}))})),serviceBtn&&(serviceBtn.addEventListener("click",(()=>{disableScroll(),serviceAside.classList.add("open")})),serviceAside.addEventListener("click",(e=>{(!serviceAside.querySelector(".service-aside__sticky").contains(e.target)||serviceAside.querySelector(".service-aside__close").contains(e.target)||e.target.classList.contains("js-anchor"))&&(serviceAside.classList.remove("open"),enableScroll())}))));let rangeSliders=document.querySelectorAll(".calc-range");function initRangeSliders(){rangeSliders.forEach((e=>{let t=e.querySelector("input[type=number"),r=e.querySelector(".calc-range__slider"),o=+e.getAttribute("data-initval"),i=+e.getAttribute("data-min"),c=+e.getAttribute("data-max");noUiSlider.create(r,{start:o,connect:[!0,!1],range:{min:i,max:c}}),t.addEventListener("change",(()=>{r.noUiSlider.set(t.value)})),r.noUiSlider.on("update",(function(e,r){t.value=parseInt(e[0]),setRangePrice()}))}))}function setRangePrice(){let e=document.querySelector(".calc-range__width").value,t=document.querySelector(".calc-range__height").value,r=+document.querySelector(".service-calc__areas input:checked").getAttribute("data-price");document.querySelector(".service-calc__price").textContent=String(Math.ceil(e*t/1e4*r)).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim()}rangeSliders&&(initRangeSliders(),document.querySelectorAll(".service-calc__areas input").forEach((e=>{e.addEventListener("change",setRangePrice)})));const itemReview=document.querySelectorAll(".item-review");if(itemReview){function showExtraBtn(){itemReview.forEach((e=>{let t=e.querySelector(".item-review__content").clientHeight;e.querySelector(".item-review__content").classList.remove("line-clamp");let r=e.querySelector(".item-review__content").clientHeight;e.querySelector(".item-review__content").classList.add("line-clamp"),r>t?e.querySelector(".item-review__body").classList.add("extra-btn-show"):e.querySelector(".item-review__body").classList.remove("extra-btn-show")}))}showExtraBtn(),window.addEventListener("resize",showExtraBtn)}const reviewSwipers=document.querySelectorAll(".item-review__images");reviewSwipers&&reviewSwipers.forEach((e=>{new Swiper(e,{slidesPerView:2.4,spaceBetween:8,observe:!0,observeParents:!0,breakpoints:{1690.98:{slidesPerView:5.1,spaceBetween:16},992.98:{slidesPerView:4.2,spaceBetween:16},575.98:{slidesPerView:4.5,spaceBetween:16},479.98:{slidesPerView:3.1,spaceBetween:16}}})})),document.querySelector(".det-reviews")&&document.querySelectorAll(".det-reviews__item").forEach((e=>{e.querySelector(".det-reviews__bar span").style.width=e.querySelector(".det-reviews__perc").textContent}));const portfolioPage=document.querySelector(".portfolio-page");portfolioPage&&portfolioPage.addEventListener("click",(e=>{portfolioPage.querySelectorAll("[data-fancy]").forEach((t=>{if(t.contains(e.target)){let e=[],r=[],o=[],i=[],c=t.getAttribute("data-fancy");portfolioPage.querySelectorAll("[data-fancy]").forEach((t=>{t.closest(".swiper-slide-duplicate")||t.getAttribute("data-fancy")!==c||(e.push(t.getAttribute("data-src")),r.push(t.nextElementSibling.textContent),o.push(t.getAttribute("data-art")),i.push(t.getAttribute("data-url")))}));let a=e.indexOf(t.getAttribute("data-src"));document.querySelector(".footer").insertAdjacentHTML("afterend",`\n          <div class="modal portfolio-modal" id="portfolio-modal">\n            <div class="modal__overlay">\n              <div class="modal__content">\n                <div class="modal__scroll">\n                  <div class="container">\n                    <button type="button" class="modal__close">${sprite("close")}</button>\n                    <div class="swiper-1 modal__swiper">\n                      <div class="swiper">\n                        <div class="swiper-wrapper">\n                          ${e.map(((e,t)=>`<div class="swiper-slide">\n                          <div class="mb-40 modal__top">\n                            <h3>${r[t]}</h3>\n                            <span class="portfolio-modal__art">${o[t]}</span>\n                          </div>\n                          <div class="mb-40 portfolio-modal__preview">\n                            <div class="media-cover">\n                              <img src=${e} alt="${r[t]}">\n                            </div>\n                          </div>\n                          <a href="${i[t]}" class="btn main-btn">Заказать такую же</a>\n                           </div>`)).join("")}\n                        </div>\n                      </div>\n                      <div class="swiper-nav">\n                        <button type="button" class="nav-btn nav-btn--prev">${sprite("arrow-left")}</button>\n                        <button type="button" class="nav-btn nav-btn--next">${sprite("arrow-right")}</button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n         `);new Swiper(".portfolio-modal .swiper",{slidesPerView:1,observer:!0,observeParents:!0,initialSlide:a,effect:"fade",fadeEffect:{crossFade:!0},speed:500,navigation:{nextEl:document.querySelector(".portfolio-modal .nav-btn--next"),prevEl:document.querySelector(".portfolio-modal .nav-btn--prev")}});const l=document.querySelector(".portfolio-modal");openModal(l),l.addEventListener("click",(e=>{l.querySelector(".modal__content").contains(e.target)&&!l.querySelector(".modal__close").contains(e.target)||(closeModal(l),setTimeout((()=>{l.remove()}),animSpd))}))}}))}));